{"ast":null,"code":"\"use strict\";\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n  return cooked;\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorPanel = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar styled_components_1 = __importDefault(require(\"styled-components\"));\nvar pubsub_js_1 = __importDefault(require(\"pubsub-js\"));\nvar react_client_1 = require(\"@speechly/react-client\");\nvar types_1 = require(\"../types\");\nvar ErrorDiv = styled_components_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  box-sizing: border-box;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  background-color: white;\\n  z-index: 51;\\n  user-select: none;\\n  pointer-events: all;\\n  color: black;\\n  display: flex;\\n  box-shadow: 0 0 8px #00000040;\\n  flex-direction: row;\\n\"], [\"\\n  box-sizing: border-box;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  background-color: white;\\n  z-index: 51;\\n  user-select: none;\\n  pointer-events: all;\\n  color: black;\\n  display: flex;\\n  box-shadow: 0 0 8px #00000040;\\n  flex-direction: row;\\n\"])));\nvar ErrorLeft = styled_components_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  box-sizing: border-box;\\n  height: 100%;\\n  width: 2rem;\\n  background-color: red;\\n  padding: 0.2rem 0.2rem;\\n  color: #ffffff;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: start;\\n  font-size: 1.5rem;\\n\"], [\"\\n  box-sizing: border-box;\\n  height: 100%;\\n  width: 2rem;\\n  background-color: red;\\n  padding: 0.2rem 0.2rem;\\n  color: #ffffff;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: start;\\n  font-size: 1.5rem;\\n\"])));\nvar ErrorRight = styled_components_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background-color: white;\\n  padding: 1rem 3rem 1rem 1rem;\\n  overflow: auto;\\n\"], [\"\\n  background-color: white;\\n  padding: 1rem 3rem 1rem 1rem;\\n  overflow: auto;\\n\"])));\nvar H1 = styled_components_1.default.h1(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  font-size: 1.5rem;\\n  margin: 0;\\n  padding: 0 0 0.5rem 0;\\n\"], [\"\\n  font-size: 1.5rem;\\n  margin: 0;\\n  padding: 0 0 0.5rem 0;\\n\"])));\nvar P = styled_components_1.default.p(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  margin: 0;\\n  padding: 0 0 0.5rem 0;\\n  color: #999;\\n\"], [\"\\n  margin: 0;\\n  padding: 0 0 0.5rem 0;\\n  color: #999;\\n\"])));\nvar A = styled_components_1.default.a(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  color: #000;\\n\"], [\"\\n  color: #000;\\n\"])));\nvar HttpsRequired = 'HttpsRequired';\nvar isLocalHost = function (hostname) {\n  return !!(hostname === 'localhost' || hostname === '[::1]' || hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/) !== null);\n};\n/**\n * An optional dismissable React component that renders an error message if something\n * prevents Speechly SDK from functioning. It also provides recovery instructions.\n * <ErrorPanel> responds to <PushToTalkButton> presses so it needs to exist somewhere in the component hierarchy.\n *\n * It is intented to be displayed at the lower part of the screen like so:\n * <PushToTalkButtonContainer><ErrorPanel/><PushToTalkButton/><PushToTalkButtonContainer>.\n *\n * @public\n */\nvar ErrorPanel = function (props) {\n  var _a = react_1.useState(null),\n    visible = _a[0],\n    setVisible = _a[1];\n  react_1.useEffect(function () {\n    var subTangentClick = pubsub_js_1.default.subscribe(types_1.SpeechlyUiEvents.TangentRelease, function (message, payload) {\n      var _a;\n      switch (payload.state) {\n        case react_client_1.SpeechState.NoAudioConsent:\n        case react_client_1.SpeechState.NoBrowserSupport:\n          // Provide special instructions for non-https access\n          if (((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.protocol) !== 'https:' && !isLocalHost(window.location.hostname)) {\n            setVisible(HttpsRequired);\n            break;\n          }\n          setVisible(payload.state);\n          break;\n        default:\n          break;\n      }\n    });\n    return function () {\n      pubsub_js_1.default.unsubscribe(subTangentClick);\n    };\n  }, []);\n  if (visible === null) return null;\n  return react_1.default.createElement(ErrorDiv, null, react_1.default.createElement(ErrorLeft, {\n    onClick: function () {\n      return setVisible(null);\n    }\n  }, \"\\u00D7\"), visible === react_client_1.SpeechState.NoAudioConsent && react_1.default.createElement(ErrorRight, null, react_1.default.createElement(H1, null, \"No Mic Permission\"), react_1.default.createElement(P, null, \"To use the voice interface, please allow your web browser access the microphone and reload.\"), react_1.default.createElement(P, null, react_1.default.createElement(A, {\n    href: \"https://docs.speechly.com/faq/#why-do-i-get-mic-consent-denied-error-in-the-playground-why-doesnt-my-microphone-work-in-the-playground\"\n  }, \"Troubleshooting\"), \"\\u00A0\\u00A0\\u00A0\\u00A0\", react_1.default.createElement(A, {\n    href: window.location.href\n  }, \"Reload\"))), visible === react_client_1.SpeechState.NoBrowserSupport && react_1.default.createElement(ErrorRight, null, react_1.default.createElement(H1, null, \"Unsupported Browser\"), react_1.default.createElement(P, null, \"To use the voice interface, please visit this site using a supported browser.\"), react_1.default.createElement(P, null, react_1.default.createElement(A, {\n    href: \"https://docs.speechly.com/faq/#the-microphone-doesnt-work-on-ios-and-mobile-safari\"\n  }, \"Troubleshooting\"))), visible === HttpsRequired && react_1.default.createElement(ErrorRight, null, react_1.default.createElement(H1, null, \"HTTPS Required\"), react_1.default.createElement(P, null, \"To use the voice interface, please visit this site using the secure https:// protocol.\"), react_1.default.createElement(P, null, react_1.default.createElement(A, {\n    href: \"https://docs.speechly.com/faq/#http-unsupported\"\n  }, \"Troubleshooting\"), \"\\u00A0\\u00A0\\u00A0\\u00A0\", react_1.default.createElement(A, {\n    href: window.location.href.replace(/^http(?!s)/, 'https')\n  }, \"Try with HTTPS\"))));\n};\nexports.ErrorPanel = ErrorPanel;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;","map":{"version":3,"names":["react_1","__importStar","require","styled_components_1","__importDefault","pubsub_js_1","react_client_1","types_1","ErrorDiv","default","div","templateObject_1","__makeTemplateObject","ErrorLeft","templateObject_2","ErrorRight","templateObject_3","H1","h1","templateObject_4","P","p","templateObject_5","A","a","templateObject_6","HttpsRequired","isLocalHost","hostname","match","ErrorPanel","props","_a","useState","visible","setVisible","useEffect","subTangentClick","subscribe","SpeechlyUiEvents","TangentRelease","message","payload","state","SpeechState","NoAudioConsent","NoBrowserSupport","window","location","protocol","unsubscribe","createElement","onClick","href","replace","exports"],"sources":["../../src/components/ErrorPanel.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}